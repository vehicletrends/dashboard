---
title: "Daily Vehicle Miles Traveled (VMT)"
---

```{r}
#| include: false

source("setup.R")

data <- vmt_daily

# Helper function to create a chart for a given facet
make_chart <- function(data, facet_var, facet_value, line_var) {
  chart_data <- data |>
    filter(.data[[facet_var]] == facet_value)

  chart_data |>
    group_by(.data[[line_var]]) |>
    e_charts(miles) |>
    e_line(quantile, symbol = "none", smooth = FALSE) |>
    e_tooltip(trigger = "axis") |>
    e_x_axis(name = "DVMT") |>
    e_y_axis(name = "Quantile") |>
    e_legend(
      show = TRUE,
      orient = "horizontal",
      left = "center",
      bottom = 0,
      width = "70%",
      selector = list(
        list(type = "all", title = "All"),
        list(type = "inverse", title = "Inverse")
      ),
      selectorPosition = "start"
    ) |>
    e_grid(bottom = 100) |>
    e_color(background = "transparent") |>
    e_toolbox_feature(feature = "dataZoom") |>
    e_toolbox_feature(feature = "saveAsImage")
}
```

This page shows the distribution of daily vehicle miles traveled (VMT) across all vehicles in the dataset. Each chart displays quantiles of daily mileage for a given combination of powertrain and vehicle type. For example, the 0.5 quantile represents the median daily mileage (half of vehicles drive less than this amount and half drive more). See the [about](about.html#vehicle-miles-traveled-vmt) page for more details.

::: {.panel-tabset}

## By Vehicle Type

*Click legend items to show/hide lines.*

::: {.grid}

::: {.g-col-6}
#### Car
```{r}
make_chart(data, "vehicle_type", "Car", "powertrain")
```
:::

::: {.g-col-6}
#### CUV
```{r}
make_chart(data, "vehicle_type", "CUV", "powertrain")
```
:::

::: {.g-col-6}
#### SUV
```{r}
make_chart(data, "vehicle_type", "SUV", "powertrain")
```
:::

::: {.g-col-6}
#### Pickup
```{r}
make_chart(data, "vehicle_type", "Pickup", "powertrain")
```
:::

::: {.g-col-6}
#### Minivan
```{r}
make_chart(data, "vehicle_type", "Minivan", "powertrain")
```
:::

:::

## By Powertrain

*Click legend items to show/hide lines.*

::: {.grid}

::: {.g-col-6}
#### Gasoline
```{r}
make_chart(data, "powertrain", "Gasoline", "vehicle_type")
```
:::

::: {.g-col-6}
#### Flex Fuel (E85)
```{r}
make_chart(data, "powertrain", "Flex Fuel (E85)", "vehicle_type")
```
:::

::: {.g-col-6}
#### Hybrid Electric (HEV)
```{r}
make_chart(data, "powertrain", "Hybrid Electric (HEV)", "vehicle_type")
```
:::

::: {.g-col-6}
#### Plug-In Hybrid Electric (PHEV)
```{r}
make_chart(data, "powertrain", "Plug-In Hybrid Electric (PHEV)", "vehicle_type")
```
:::

::: {.g-col-6}
#### Battery Electric (BEV)
```{r}
make_chart(data, "powertrain", "Battery Electric (BEV)", "vehicle_type")
```
:::

::: {.g-col-6}
#### BEV (Tesla)
```{r}
make_chart(data, "powertrain", "BEV (Tesla)", "vehicle_type")
```
:::

::: {.g-col-6}
#### BEV (Non-Tesla)
```{r}
make_chart(data, "powertrain", "BEV (Non-Tesla)", "vehicle_type")
```
:::

::: {.g-col-6}
#### Diesel
```{r}
make_chart(data, "powertrain", "Diesel", "vehicle_type")
```
:::

::: {.g-col-6}
#### Fuel Cell
```{r}
make_chart(data, "powertrain", "Fuel Cell", "vehicle_type")
```
:::

:::

## Data

<center>
[Download data](`r url_vmt_daily`)

<div style="width:900px">

```{r}
data |>
  mutate(
    miles = round(miles, 2)
  ) |>
  rename(
    Powertrain = powertrain,
    `Vehicle Type` = vehicle_type,
    Quantile = quantile,
    Miles = miles
  ) |>
  reactable::reactable(
    searchable = TRUE,
    highlight = TRUE,
    filterable = TRUE,
    defaultPageSize = 10,
    showPageSizeOptions = TRUE,
    pageSizeOptions = c(5, 10, 25, 50)
  )
```

</div>
</center>

:::
