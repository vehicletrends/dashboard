---
title: "Vehicle Miles Traveled (VMT) by Age"
---

```{r}
#| include: false

library(dplyr)
library(echarts4r)

data_url <- "https://raw.githubusercontent.com/vehicletrends/vehicletrends/refs/heads/main/data-raw/vmt_age.csv"
data <- read.csv(data_url)

# Filter to 50th quantile only and convert age from months to years
data <- data |>
  filter(quantile == 50) |>
  mutate(age_years = age_bin / 12)

# Helper function to create a chart for a given facet
make_chart <- function(data, facet_var, facet_value, line_var) {
  chart_data <- data |>
    filter(.data[[facet_var]] == facet_value)

  chart_data |>
    group_by(.data[[line_var]]) |>
    e_charts(age_years) |>
    e_line(miles, symbol = "none", smooth = FALSE) |>
    e_tooltip(trigger = "axis") |>
    e_x_axis(name = "Age (years)") |>
    e_y_axis(name = "Miles") |>
    e_legend(
      show = TRUE,
      orient = "horizontal",
      left = "center",
      bottom = 0,
      width = "70%",
      selector = list(
        list(type = "all", title = "All"),
        list(type = "inverse", title = "Inverse")
      ),
      selectorPosition = "start"
    ) |>
    e_grid(bottom = 100) |>
    e_color(background = "transparent") |>
    e_toolbox_feature(feature = "dataZoom") |>
    e_toolbox_feature(feature = "saveAsImage")
}
```

This page shows median cumulative vehicle miles traveled (VMT) by vehicle age. Each chart displays the 50th quantile (median) of total mileage for a given combination of powertrain and vehicle type as vehicles age over time. The "Data" tab shows the raw data, which also includes the 25th and 75th quantiles. Lines that are less smooth are the result of less data for that particular combination of powertrain and vehicle type. See the [about](about.html#vehicle-miles-traveled-vmt) page for more details.

::: {.panel-tabset}

## By Vehicle Type

*Click legend items to show/hide lines.*

::: {.grid}

::: {.g-col-6}
#### Car
```{r}
make_chart(data, "vehicle_type", "Car", "powertrain")
```
:::

::: {.g-col-6}
#### SUV
```{r}
make_chart(data, "vehicle_type", "SUV", "powertrain")
```
:::

::: {.g-col-6}
#### CUV
```{r}
make_chart(data, "vehicle_type", "CUV", "powertrain")
```
:::

::: {.g-col-6}
#### Pickup
```{r}
make_chart(data, "vehicle_type", "Pickup", "powertrain")
```
:::

::: {.g-col-6}
#### Minivan
```{r}
make_chart(data, "vehicle_type", "Minivan", "powertrain")
```
:::

:::

## By Powertrain

*Click legend items to show/hide lines.*

::: {.grid}

::: {.g-col-6}
#### BEV
```{r}
make_chart(data, "powertrain", "BEV", "vehicle_type")
```
:::

::: {.g-col-6}
#### BEV (Tesla)
```{r}
make_chart(data, "powertrain", "BEV (Tesla)", "vehicle_type")
```
:::

::: {.g-col-6}
#### BEV (Non-Tesla)
```{r}
make_chart(data, "powertrain", "BEV (Non-Tesla)", "vehicle_type")
```
:::

::: {.g-col-6}
#### Conventional
```{r}
make_chart(data, "powertrain", "Conventional", "vehicle_type")
```
:::

::: {.g-col-6}
#### Diesel
```{r}
make_chart(data, "powertrain", "Diesel", "vehicle_type")
```
:::

::: {.g-col-6}
#### Flex Fuel
```{r}
make_chart(data, "powertrain", "Flex Fuel", "vehicle_type")
```
:::

::: {.g-col-6}
#### Fuel Cell EV
```{r}
make_chart(data, "powertrain", "Fuel Cell EV", "vehicle_type")
```
:::

::: {.g-col-6}
#### Hybrid
```{r}
make_chart(data, "powertrain", "Hybrid", "vehicle_type")
```
:::

::: {.g-col-6}
#### PHEV
```{r}
make_chart(data, "powertrain", "PHEV", "vehicle_type")
```
:::

:::

## Data

<center>
[Download data](https://raw.githubusercontent.com/vehicletrends/vehicletrends/refs/heads/main/data-raw/vmt_age.csv)

<div style="width:900px">

```{r}
# Reload full data for the table
data_url <- "https://raw.githubusercontent.com/vehicletrends/vehicletrends/refs/heads/main/data-raw/vmt_age.csv"
full_data <- read.csv(data_url)

full_data |>
  mutate(
    age_years = round(age_bin / 12, 2),
    miles = round(miles, 0)
  ) |>
  select(powertrain, vehicle_type, age_years, quantile, miles) |>
  rename(
    Powertrain = powertrain,
    `Vehicle Type` = vehicle_type,
    `Age (years)` = age_years,
    Quantile = quantile,
    Miles = miles
  ) |>
  reactable::reactable(
    searchable = TRUE,
    highlight = TRUE,
    filterable = TRUE,
    defaultPageSize = 10,
    showPageSizeOptions = TRUE,
    pageSizeOptions = c(5, 10, 25, 50)
  )
```

</div>
</center>

:::
